(this.webpackJsonpfrontend_br_simple_api=this.webpackJsonpfrontend_br_simple_api||[]).push([[0],{143:function(e,t,a){},144:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(21),s=a.n(i),l=a(11),c=a(12),o=a(64),d=a(15),u=a(14),p=a(108),h=a(109),j=a(110),f=a(76),m=a(1);var b=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"action_card",value:function(e,t){return Object(m.jsx)(p.a,{children:Object(m.jsxs)(h.a,{className:t,children:[Object(m.jsx)(h.a.Header,{children:Object(m.jsx)(p.a.Toggle,{as:h.a.Header,variant:"link",eventKey:"0",children:e.name})}),Object(m.jsx)(p.a.Collapse,{eventKey:"0",children:Object(m.jsx)(h.a.Body,{children:"Hello! I'm the body"})})]})},e.name)}},{key:"render",value:function(){var e=this;if(null===this.props.schema)return Object(m.jsx)(m.Fragment,{children:Object(m.jsx)("strong",{children:"Could not obtain schema, check your connection to the API, then refresh"})});var t=function(e){var t=[];return null===e?{}:(e.__objects.forEach((function(e){return e.actions.forEach((function(e){t.push(e)}))})),{object:t,general:e.__actions})}(this.props.schema),a=[];return t.general.forEach((function(t){a.push(e.action_card(t,"bg-object"))})),t.object.forEach((function(t){a.push(e.action_card(t,"bg-action"))})),Object(m.jsx)(m.Fragment,{children:a})}}]),a}(r.a.Component),g=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){return Object(m.jsx)(j.a,{className:"flex-grow-1 overflow-hidden",children:Object(m.jsx)(f.a,{sm:12,className:"p-4 mh-100",children:Object(m.jsx)(b,{schema:this.props.schema})})})}}]),a}(r.a.Component),O=a(116),v=a(36),x=a(57);function y(e){return JSON.stringify(e)}function _(e){var t=Number(e);if(isNaN(t))throw new Error("Value is not a number");return t}function C(e){switch(e){case"true":return!0;case"false":return!1;default:throw new Error("Invalid value in field")}}function S(e,t){try{if("!"===t[t.length-1]){if(t=t.slice(0,-1),null===e||void 0===e)return y(e)}else if(null===e||void 0===e)return null;if("["===t[0]&&"]"===t[t.length-1]){var a=[];return JSON.parse(e).forEach((function(e){return a.push(S(e,t.slice(1,-1)))})),"["+a.join(", ")+"]"}switch(t){case"Integer":case"Float":return _(e);case"String":return y(e);case"Boolean":return C(e);case"Date":case"Time":case"Datetime":case"Duration":default:return y(e)}}catch(n){return y(e)}}function k(e,t){try{if("!"===t[t.length-1]){if(t=t.slice(0,-1),null===e||void 0===e)return!1}else if(null===e||void 0===e)return!0;if("["===t[0]&&"]"===t[t.length-1]){var a=JSON.parse(e);if(!Array.isArray(a))return!1;for(var n=0;n<a.length;n++)if(!k(a[n],t.slice(1,-1)))return!1;return!0}switch(t){case"Integer":case"Float":_(e);break;case"String":y(e);break;case"Boolean":C(e);break;case"Date":case"Time":case"Datetime":case"Duration":default:return null}return!0}catch(r){return!1}}function N(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a="!"!==e[e.length-1];a||(e=e.slice(0,-1));var n=t.find((function(t){return t.typename===e}));if("undefined"!==typeof n)return{field:"Select",required:a,options:n.fields,placeholder:"Add Filter: ",spawn_fields:!0};switch(e){case"Integer":case"Float":return{field:"Number",required:a};case"String":return{field:"Text",required:a};case"Boolean":return{field:"Select",required:a,options:[{name:"true"},{name:"false"}],placeholder:"Select Bool",spawn_fields:!1};case"Date":case"Time":case"Datetime":case"Duration":default:return{field:"Text",required:a}}}function F(e,t){return"object"!==typeof t[e]||null===t[e]?t[e].toString():"__str__"in t[e]?t[e].__str__:void 0}function w(e,t,a,n){return(e.mutation?"mutation":"query")+" {\n"+A(e.name,t,a)+P(e.return_type,n.__types,4)+"}\n"}function A(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2,r=" ".repeat(n),i=[],s=[];for(var l in t)if(!t[l].not_include)if(0===Object.entries(t[l].additional_fields).length)i.push(l+": "+S(t[l].value,t[l].datatype));else{var c=[];for(var o in t[l].additional_fields)c.push(o+": "+S(t[l].additional_fields[o].value,t[l].additional_fields[o].datatype));i.push(l+": {"+c.join(", ")+"}")}for(var d in a)if(!a[d].not_include)if(0===Object.entries(a[d].additional_fields).length)s.push(d+": "+S(a[d].value,a[d].datatype));else{var u=[];for(var p in a[d].additional_fields)u.push(p+": "+S(a[d].additional_fields[p].value,a[d].additional_fields[p].datatype));s.push(d+": {"+u.join(", ")+"}")}if(0===i.length&&0===s.length)return r+e;var h=i.join(", ")+(0===i.length||0===s.length?"":", ")+(0===s.length?"":"data: {"+s.join(", ")+"}");return""!==h&&(h="("+h+")"),r+e+h}function I(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=" ".repeat(a);"!"===e.typename[e.typename.length-1]&&(e.typename=e.typename.slice(0,-1));var i=t.find((function(t){return t.typename===e.typename}));return"Paginated"===e.typename.substring(0,9)?n?r+e.name+" {\n"+r+"    __str__\n"+r+"}\n":r+"# Further ObjectList exist but is not listed automatically\n"+r+"# "+e.name+"{}\n":"undefined"!==typeof i?n?r+e.name+" {\n"+r+"    __str__\n"+r+"}\n":r+"# Further objects exist but are not listed automatically\n"+r+"# "+e.name+"{}\n":r+e.name+"\n"}function P(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=" ".repeat(a);"!"===e[e.length-1]&&(e=e.slice(0,-1));var s=t.find((function(t){return t.typename===e}));if("Paginated"===e.substring(0,9))return"{\n"+i+"count\n"+i+"data (limit: 20) "+P(e.substring(10,e.length-1),t,a+2,n)+" ".repeat(a-2)+"}\n";if("undefined"!==typeof s){var l="";r&&(l+=V(a)),n&&(l+=" ".repeat(a)+"__str__\n");var c,o=Object(x.a)(s.fields);try{for(o.s();!(c=o.n()).done;){var d=c.value;l+=I(d,t,a,e,n)}}catch(u){o.e(u)}finally{o.f()}return" {\n"+l+" ".repeat(a-2)+"}\n"}return" \n"}function T(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:20,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},i=e.name+"List",s=e.actions.find((function(e){return e.name===i}));if(void 0===s)throw new Error("List action does not exist or is not named < Object >List");return"!"===s.return_type[s.return_type.length-1]&&(s.return_type=s.return_type.slice(0,-1)),(s.mutation?"mutation {\n":"query {\n")+A(i,r)+"{\n    count\n    data (limit:"+n+", offset:"+a+")"+P(s.return_type.substring(10,s.return_type.length-1),t,6,!0,!0)+"  }\n}"}function V(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2;return" ".repeat(e)+"__actions {\n"+" ".repeat(e+2)+"name\n"+" ".repeat(e+2)+"parameters{\n"+" ".repeat(e+4)+"name\n"+" ".repeat(e+4)+"typename\n"+" ".repeat(e+4)+"default\n"+" ".repeat(e+2)+"}\n"+" ".repeat(e+2)+"data {\n"+" ".repeat(e+4)+"name\n"+" ".repeat(e+4)+"typename\n"+" ".repeat(e+4)+"default\n"+" ".repeat(e+2)+"}\n"+" ".repeat(e+2)+"mutation\n"+" ".repeat(e+2)+"return_type\n"+" ".repeat(e+2)+"permitted\n"+" ".repeat(e+2)+"deny_reason\n"+" ".repeat(e+2)+"retry_in\n"+" ".repeat(e)+"}\n"}function M(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};console.log(e),fetch("../api/",{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":R()},credentials:"include",body:JSON.stringify({query:e})}).then((function(e){return e.json()})).catch((function(e){return a(e.text)})).then((function(e){return t(e),e})).catch((function(e){return a(e.text)}))}function E(e,t,a){fetch("./login",{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":R()},credentials:"include",body:JSON.stringify({operation:"logout"})}).then((function(e){return e.json()})).then((function(n){return D(e,n,t,a)})).catch((function(e){return a(e.text)}))}function D(e,t,a,n){t.success?a(e):n(t.reason)}function q(e,t){return"__typename"===e?void 0:t}function B(e){var t=null;if(document.cookie&&""!==document.cookie)for(var a=document.cookie.split(";"),n=0;n<a.length;n++){var r=a[n].trim();if(r.substring(0,e.length+1)===e+"="){t=decodeURIComponent(r.substring(e.length+1));break}}return t}function L(e,t){var a=new Date;a.setTime(a.getTime()+6048e5),document.cookie=e+"="+t+"; expires="+a.toUTCString()}function R(){return B("csrftoken")}var K=a(111),H=a(121),J=a(112),Q=a(113),U=a(44),X=(a(131),a(132),a(133),a(136),a(137),function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e,n){var r;Object(l.a)(this,a),(r=t.call(this,e,n)).handleChangeFields=function(e,t,a){var n={parameters:r.state.parameters,data:r.state.data};n[t][e].value=a.target.value,n.query=w(r.props.action,n.parameters,n.data,r.props.schema),r.setState(n),r.fieldTypeValidation(e,a.target.value,t)},r.handleChangeCustomProperty=function(e,t,a,n){var i={parameters:r.state.parameters,data:r.state.data};i[a][e].additional_fields[t].value=n.target.value,i.query=w(r.props.action,i.parameters,i.data,r.props.schema),r.setState(i),r.additionalFieldTypeValidation(e,t,n.target.value,a)},r.handleIgnoreProperty=function(e,t,a){var n={parameters:r.state.parameters,data:r.state.data};n[t][e].not_include=!a.target.checked,n.query=w(r.props.action,n.parameters,n.data,r.props.schema),a.target.checked?(r.setState(n),r.fieldTypeValidation(e,r.state[t][e].value,t)):(n[t][e].validity=null,r.setState(n))},r.deleteAdditionalField=function(e,t,a){var n={parameters:r.state.parameters,data:r.state.data};delete n[t][e].additional_fields[a],n[t][e].additional_fields&&0===Object.keys(n[t][e].additional_fields).length&&n[t][e].additional_fields.constructor===Object&&(n[t][e].not_include=!0),n.query=w(r.props.action,n.parameters,n.data,r.props.schema),r.setState(n)},r.addAdditionalField=function(e,t,a,n){var i={parameters:r.state.parameters,data:r.state.data};i[t][e].additional_fields[n.target.value]={datatype:a,value:"",validity:null},i[t][e].not_include=!1,i.query=w(r.props.action,i.parameters,i.data,r.props.schema),r.setState(i),n.target.value="__Datatype_Placeholder"},r.additionalFieldTypeValidation=function(e,t,a,n){var i={parameters:r.state.parameters,data:r.state.data};i[n][e].additional_fields[t].validity=k(a,i[n][e].additional_fields[t].datatype),r.setState(i)},r.fieldTypeValidation=function(e,t,a){var n={parameters:r.state.parameters,data:r.state.data};n[a][e].validity=k(t,n[a][e].datatype),r.setState(n)},r.handleChangeQueryCodeMirror=function(e,t,a){r.setState({query:a})},r.update_response=function(e){if("errors"in e)try{var t,a=Object(x.a)(e.errors);try{for(a.s();!(t=a.n()).done;){var n=t.value,i=/field "[^"]*"|Argument "[^"]*"/.exec(n.message),s="",l="";if(null!==i){if(-1!==i[0].indexOf("Argument")){s=i[0].substring(i[0].indexOf('"')+1,i[0].length-1);try{l=(l=/field "[^"]*"/.exec(n.message)[0]).substring(l.indexOf('"')+1,l.length-1)}catch(d){}}else s=i[0].substring(i[0].indexOf('"')+1,i[0].length-1);if("data"===s){var c=r.state.data;""===l?s in c&&(c[s].validity=!1):l in c[s].additional_fields&&(c[s].additional_fields[l].validity=!1),r.setState({parameters:c})}else{var o=r.state.parameters;""===l?s in o&&(o[s].validity=!1):l in o[s].additional_fields&&(o[s].additional_fields[l].validity=!1),r.setState({parameters:o})}}}}catch(u){a.e(u)}finally{a.f()}}catch(p){}"data"in e||"errors"in e?r.setState({response:JSON.stringify(e,q,2),responseAlert:!0}):("string"===typeof e&&r.setState({response:e,responseAlert:!0}),r.ReturnValueEditorInstance.refresh())},r.Send_to_API=function(){M(r.state.query,r.update_response)},r.componentDidMount=function(){r.setState({query:w(r.props.action,r.state.parameters,r.state.data,r.props.schema)}),r.QueryEditorInstance.refresh(),r.ReturnValueEditorInstance.refresh()},r.createSubField=function(e,t,a,n,r,i,s){if(["Text","Number","Time"].includes(t.field))return Object(m.jsxs)("div",{children:[e,":",Object(m.jsx)("br",{}),Object(m.jsxs)(K.a,{children:[Object(m.jsx)(H.a.Control,{type:t.field,isValid:a,isInvalid:n,placeholder:r,onChange:i}),Object(m.jsx)(K.a.Append,{children:Object(m.jsx)(v.a,{variant:"outline-secondary p-0",onClick:s,children:Object(m.jsx)("i",{className:"bi bi-x text-danger remove-field-x"})})})]})]},e);if("Select"===t.field){var l=[Object(m.jsx)("option",{disabled:!0,hidden:!0,value:"Select...",children:"Select..."},"__Null_NonSelection")];return Object.keys(t.options).forEach((function(e){return l.push(Object(m.jsx)("option",{children:t.options[e].name},t.options[e].name))})),Object(m.jsxs)("div",{children:[e,":",Object(m.jsx)("br",{}),Object(m.jsxs)(K.a,{children:[Object(m.jsx)(H.a.Control,{as:t.field.toLowerCase(),isValid:a,isInvalid:n,defaultValue:"Select...",onChange:i,children:l}),Object(m.jsx)(K.a.Append,{children:Object(m.jsx)(v.a,{variant:"outline-secondary p-0",onClick:s,children:Object(m.jsx)("i",{className:"bi bi-x text-danger remove-field-x"})})})]})]},e)}},r.create_field=function(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=N(a,n),s=!i.required||null!==r.state[t][e].default;if("Select"===i.field){var l=[];Object.keys(r.state[t][e].additional_fields).forEach((function(a){l.push(r.createSubField(a,N(r.state[t][e].additional_fields[a].datatype),null!==r.state[t][e].additional_fields[a].validity&&r.state[t][e].additional_fields[a].validity,null!==r.state[t][e].additional_fields[a].validity&&!r.state[t][e].additional_fields[a].validity,a,(function(n){r.handleChangeCustomProperty(e,a,t,n)}),(function(){r.deleteAdditionalField(e,t,a)})))}));var c=[Object(m.jsx)("option",{disabled:!0,hidden:!0,value:"__Datatype_Placeholder",children:i.placeholder},"__Datatype_Placeholder")];return i.options.forEach((function(e){c.push(Object(m.jsx)("option",{children:e.name},e.name))})),Object(m.jsxs)("div",{children:[e,":",Object(m.jsx)("br",{}),Object(m.jsxs)(K.a,{children:[Object(m.jsx)(H.a.Control,{as:"select",defaultValue:null===r.state[t][e].defaultValue?"__Datatype_Placeholder":r.state[t][e].defaultValue,onChange:function(a){i.spawn_fields?r.addAdditionalField(e,t,i.options.find((function(e){return e.name===a.target.value})).typename,a):r.handleChangeFields(e,t,a)},children:c}),s&&Object(m.jsx)(K.a.Append,{children:Object(m.jsx)(K.a.Checkbox,{"aria-label":"Don't include this field",onChange:function(a){r.handleIgnoreProperty(e,t,a)},checked:!r.state[t][e].not_include})})]}),l]},e)}return Object(m.jsxs)("div",{children:[e,":",Object(m.jsx)("br",{}),Object(m.jsxs)(K.a,{children:[Object(m.jsx)(H.a.Control,{isValid:null!==r.state[t][e].validity&&r.state[t][e].validity,isInvalid:null!==r.state[t][e].validity&&!r.state[t][e].validity,type:i.field,placeholder:e,defaultValue:r.state[t][e].defaultValue,onChange:function(a){r.handleChangeFields(e,t,a)}}),s&&Object(m.jsx)(K.a.Append,{children:Object(m.jsx)(K.a.Checkbox,{"aria-label":"Don't include this field",onChange:function(a){r.handleIgnoreProperty(e,t,a)},checked:!r.state[t][e].not_include})})]})]},e)},r.refreshCodeMirror=function(e){"response"===e&&r.setState({responseAlert:!1}),setTimeout((function(){r.QueryEditorInstance.refresh(),r.ReturnValueEditorInstance.refresh()}),5)};var i=r.props.action,s={},c={};return"parameters"in i&&i.parameters.forEach((function(e){s[e.name]={defaultValue:"default"in e?e.default:"",value:"",datatype:e.typename,validity:null,not_include:"!"!==e.typename[e.typename.length-1]||null!==e.default,additional_fields:{}}})),"data"in i&&i.data.forEach((function(e){c[e.name]={defaultValue:"default"in e?e.default:"",value:"",datatype:e.typename,validity:null,not_include:"!"!==e.typename[e.typename.length-1]||null!==e.default,additional_fields:{}}})),r.state={parameters:s,data:c,query:"",response:"",responseAlert:!1},r.QueryEditorInstance=null,r.ReturnValueEditorInstance=null,r}return Object(c.a)(a,[{key:"testReturnValues",value:function(){}},{key:"render",value:function(){var e=this,t=this.props.action,a=[],n=[];Object.keys(this.state.parameters).forEach((function(t){a.push(e.create_field(t,"parameters",e.state.parameters[t].datatype,e.props.schema.__types))})),Object.keys(this.state.data).forEach((function(t){n.push(e.create_field(t,"data",e.state.data[t].datatype,e.props.schema.__types))})),a.length&&a.unshift(Object(m.jsxs)("div",{className:"border-bottom border-dark w-100 d-flex justify-content-between",children:[Object(m.jsx)("strong",{children:"Parameters:"}),Object(m.jsx)("strong",{children:"Include:"})]},"param_title")),n.length&&n.unshift(Object(m.jsxs)("div",{className:"border-bottom border-dark w-100 d-flex justify-content-between",children:[Object(m.jsx)("strong",{children:"Data:"}),Object(m.jsx)("strong",{children:"Include:"})]},"data_title"));var r=this.state.query,i=this.state.response;return Object(m.jsxs)(h.a,{border:"dark",className:"ml-1 mr-3 mh-100 h-100 flex-column",children:[Object(m.jsx)(h.a.Header,{children:Object(m.jsx)(h.a.Title,{className:"edited-title",children:t.name})}),Object(m.jsx)(h.a.Body,{className:"container-fluid",children:Object(m.jsxs)(j.a,{className:"container-fluid d-flex h-100 overflow-hidden p-1",children:[Object(m.jsx)(f.a,{sm:3,className:"mh-100 flex-column",children:Object(m.jsxs)(H.a,{className:"flex-grow-1 h-100",noValidate:!0,children:[a,n,Object(m.jsx)("footer",{className:"position-absolute bottom-stick",children:Object(m.jsx)(v.a,{variant:"primary",onClick:this.Send_to_API,children:t.mutation?"Mutation":"Query"})})]})}),Object(m.jsx)(f.a,{sm:9,className:"pb-1",children:Object(m.jsx)("div",{className:"mh-100 h-100 flex-column modal-tabs border border-dark",children:Object(m.jsxs)(J.a,{variant:"pills",className:"nav-fill mx-3 mt-1",defaultActiveKey:"query",onSelect:this.refreshCodeMirror,children:[Object(m.jsx)(Q.a,{eventKey:"query",title:t.mutation?"Mutation:":"Query:",children:Object(m.jsx)(U.Controlled,{value:r,className:"no-resize mb-4 mh-100",options:{theme:"idea",autoRefresh:!0,lineWrapping:!0,keyMap:"sublime",mode:"graphql",smartIndent:!0,lineNumbers:!0},onBeforeChange:this.handleChangeQueryCodeMirror,onChange:function(){},editorDidMount:function(t){e.QueryEditorInstance=t}})}),Object(m.jsx)(Q.a,{eventKey:"response",tabClassName:this.state.responseAlert?"bg-warning text-dark":"",title:"Response:",children:Object(m.jsx)(U.UnControlled,{value:i,className:"no-resize mb-4 mh-100",options:{theme:"idea",autoRefresh:!0,readOnly:!0,lineWrapping:!0,keyMap:"sublime",mode:{name:"javascript",json:!0},smartIndent:!0,lineNumbers:!0},editorDidMount:function(t){e.ReturnValueEditorInstance=t}})})]})})})]})})]})}}]),a}(r.a.Component)),z=a(122),W=a(54),G=a(119),Y=a(114),Z=a(78),$=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).PageNumbers=function(){return n.props.pages_num<=3?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(Y.a.Prev,{disabled:1===n.props.current_page}),Object(m.jsx)(Y.a.Item,{onClick:function(){n.props.changePageFn(1)},active:1===n.props.current_page,children:"1"}),n.props.pages_num>1&&Object(m.jsx)(Y.a.Item,{onClick:function(){n.props.changePageFn(2)},active:2===n.props.current_page,children:"2"}),n.props.pages_num>2&&Object(m.jsx)(Y.a.Item,{onClick:function(){n.props.changePageFn(3)},active:3===n.props.current_page,children:"3"}),Object(m.jsx)(Y.a.Next,{disabled:n.props.current_page===n.props.pages_num})]}):1===n.props.current_page?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(Y.a.Prev,{disabled:!0}),Object(m.jsx)(Y.a.Item,{onClick:function(){n.props.changePageFn(1)},active:!0,children:"1"}),Object(m.jsx)(Y.a.Item,{onClick:function(){n.props.changePageFn(2)},children:"2"}),Object(m.jsx)(Y.a.Item,{onClick:function(){n.props.changePageFn(3)},children:"3"}),4!==n.props.pages_num&&Object(m.jsx)(Y.a.Ellipsis,{onClick:n.modalShow}),Object(m.jsx)(Y.a.Item,{onClick:function(){n.props.changePageFn(n.props.pages_num)},children:n.props.pages_num}),Object(m.jsx)(Y.a.Next,{onClick:function(){n.props.changePageFn(n.props.current_page+1)}})]}):n.props.current_page===n.props.pages_num?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(Y.a.Prev,{onClick:function(){n.props.changePageFn(n.props.current_page-1)}}),Object(m.jsx)(Y.a.Item,{onClick:function(){n.props.changePageFn(1)},children:"1"}),4!==n.props.pages_num&&Object(m.jsx)(Y.a.Ellipsis,{onClick:n.modalShow}),Object(m.jsx)(Y.a.Item,{onClick:function(){n.props.changePageFn(n.props.current_page-2)},children:n.props.current_page-2}),Object(m.jsx)(Y.a.Item,{onClick:function(){n.props.changePageFn(n.props.current_page-1)},children:n.props.current_page-1}),Object(m.jsx)(Y.a.Item,{onClick:function(){n.props.changePageFn(n.props.current_page)},active:!0,children:n.props.current_page}),Object(m.jsx)(Y.a.Next,{disabled:!0})]}):Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(Y.a.Prev,{onClick:function(){n.props.changePageFn(n.props.current_page-1)}}),2!==n.props.current_page&&Object(m.jsx)(Y.a.Item,{onClick:function(){n.props.changePageFn(1)},children:"1"}),3!==n.props.current_page&&n.props.current_page-2>0&&Object(m.jsx)(Y.a.Ellipsis,{onClick:n.modalShow}),Object(m.jsx)(Y.a.Item,{onClick:function(){n.props.changePageFn(n.props.current_page-1)},children:n.props.current_page-1}),Object(m.jsx)(Y.a.Item,{onClick:function(){n.props.changePageFn(n.props.current_page)},active:!0,children:n.props.current_page}),Object(m.jsx)(Y.a.Item,{onClick:function(){n.props.changePageFn(n.props.current_page+1)},children:n.props.current_page+1}),n.props.current_page!==n.props.pages_num-2&&n.props.pages_num-n.props.current_page!==1&&Object(m.jsx)(Y.a.Ellipsis,{onClick:n.modalShow}),n.props.current_page!==n.props.pages_num-1&&Object(m.jsx)(Y.a.Item,{onClick:function(){n.props.changePageFn(n.props.pages_num)},children:n.props.pages_num}),Object(m.jsx)(Y.a.Next,{onClick:function(){n.props.changePageFn(n.props.current_page+1)}})]})},n.modalShow=function(){n.setState({showModal:!0})},n.modalClose=function(){n.setState({showModal:!1})},n.jumpToPage=function(e){n.state.modalPage>=1&&n.state.modalPage<=n.props.pages_num&&n.props.changePageFn(e)},n.create_modal=function(){return Object(m.jsxs)(G.a,{show:n.state.showModal,onHide:n.modalClose,children:[Object(m.jsx)(G.a.Header,{closeButton:!0,children:Object(m.jsx)(G.a.Title,{children:"Jump to page ..."})}),Object(m.jsx)(G.a.Body,{children:Object(m.jsx)(Z.a,{type:"Number",placeholder:"Page",onChange:function(e){n.setState({modalPage:e.target.value})},isValid:n.state.modalPage>=1&&n.state.modalPage<=n.props.pages_num,isInvalid:null!==n.state.modalPage&&(n.state.modalPage<1||n.state.modalPage>n.props.pages_num)})}),Object(m.jsxs)(G.a.Footer,{children:[Object(m.jsx)(v.a,{variant:"secondary",onClick:n.modalClose,children:"Close"}),Object(m.jsx)(v.a,{variant:"primary",onClick:function(){n.jumpToPage(n.state.modalPage)},children:"Go"})]})]})},n.state={showModal:!1,modalPage:null},n}return Object(c.a)(a,[{key:"render",value:function(){return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(Y.a,{className:"px-2 mb-1",children:this.PageNumbers()}),this.create_modal()]})}}]),a}(r.a.Component),ee=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).sendFilters=function(){var e={},t=function(t){e[t]={value:S(n.state.filters[t],n.props.filtersObject.fields.find((function(e){return e.name===t})).typename),datatype:n.props.filtersObject.fields.find((function(e){return e.name===t})).typename}};for(var a in n.state.filters)t(a);var r={filters:{additional_fields:e,datatype:n.props.type.typename+"Filters"}};n.props.changeFilterFn(r)},n.addToOrder=function(e){var t=n.state.filters;t.ordering.push(e),n.setState({order:t})},n.orderingParse=function(e){return"-"===e[0]?e.slice(1)+" (Descending)":e+" (Ascending)"},n.removeFromOrder=function(e){var t=n.state.filters.ordering;t.splice(e,1),n.setState({order:t})},n.orderModalShow=function(){n.setState({openOrderModal:!0})},n.orderModalClose=function(){n.setState({openOrderModal:!1})},n.create_order_modal=function(){var e=n.state.filters.ordering.map((function(e,t){return Object(m.jsxs)(K.a,{className:"text-center m-2",children:[Object(m.jsx)(Z.a,{disabled:!0,value:t.toString()+". "+n.orderingParse(e)}),Object(m.jsx)(K.a.Append,{children:Object(m.jsx)(v.a,{variant:"outline-danger",onClick:function(){n.removeFromOrder(t)},children:"X"})})]},e+t.toString())})),t=n.props.type.fields.map((function(e){return Object(m.jsxs)(K.a,{className:"m-2",children:[Object(m.jsx)(Z.a,{disabled:!0,"aria-describedby":"basic-addon2",value:e.name}),Object(m.jsxs)(K.a.Append,{children:[Object(m.jsx)(v.a,{variant:"outline-dark",onClick:function(){n.addToOrder("-"+e.name)},children:"\u25bc"}),Object(m.jsx)(v.a,{variant:"outline-dark",onClick:function(){n.addToOrder(e.name)},children:"\u25b2"})]})]},e.name)}));return Object(m.jsxs)(G.a,{show:n.state.openOrderModal,onHide:n.orderModalClose,className:"larger-modal",children:[Object(m.jsx)(G.a.Header,{closeButton:!0,children:Object(m.jsx)(G.a.Title,{children:"Modal heading"})}),Object(m.jsxs)(G.a.Body,{className:"d-flex justify-content-between",children:[Object(m.jsxs)("div",{className:"w-50 mr-4",children:["Current order:",e]}),Object(m.jsxs)("div",{className:"w-50 ml-4",children:["Add new parameter to order by:",t]})]}),Object(m.jsxs)(G.a.Footer,{className:"d-flex justify-content-between",children:[Object(m.jsx)("div",{children:Object(m.jsx)(v.a,{variant:"primary",onClick:function(){n.orderModalClose(),n.setState({order:["?"]}),setTimeout((function(){n.sendFilters()}),5)},children:"Randomize!"})}),Object(m.jsxs)("div",{children:[Object(m.jsx)(v.a,{variant:"primary",className:"mr-2",onClick:function(){n.orderModalClose(),n.sendFilters()},children:"Save Changes"}),Object(m.jsx)(v.a,{variant:"secondary",onClick:n.orderModalClose,children:"Close"})]})]})]})},n.filterModalShow=function(){n.setState({openFilterModal:!0})},n.filterModalClose=function(){n.setState({openFilterModal:!1})},n.handleSubfieldChange=function(e,t){var a=n.state.filters;a[e]=t.target.value,n.setState({filters:a}),n.subfieldValidation(e)},n.subfieldValidation=function(e){var t=n.props.filtersObject.fields.find((function(t){return t.name===e})).typename,a=n.state.filters[e],r=n.state.filtersValidity;r[e]=k(a,t),n.setState({filtersValidity:r})},n.createSubField=function(e,t,a,r,i,s,l){if(["Text","Number","Time"].includes(t.field))return Object(m.jsxs)("div",{children:[e,":",Object(m.jsx)("br",{}),Object(m.jsxs)(K.a,{children:[Object(m.jsx)(H.a.Control,{defaultValue:n.state.filters[e],type:t.field,isValid:a,isInvalid:r,placeholder:i,onChange:s}),Object(m.jsx)(K.a.Append,{children:Object(m.jsx)(v.a,{variant:"outline-secondary p-0",onClick:l,children:Object(m.jsx)("i",{className:"bi bi-x text-danger remove-field-x"})})})]})]},e);if("Select"===t.field){var c=[Object(m.jsx)("option",{disabled:!0,hidden:!0,value:"__Null_NonSelection",children:"Select..."},"__Null_NonSelection")];return Object.keys(t.options).forEach((function(e){return c.push(Object(m.jsx)("option",{children:t.options[e].name},t.options[e].name))})),Object(m.jsxs)("div",{children:[e,":",Object(m.jsx)("br",{}),Object(m.jsxs)(K.a,{children:[Object(m.jsx)(H.a.Control,{as:t.field.toLowerCase(),isValid:a,isInvalid:r,defaultValue:""===n.state.filters[e]?"Select...":n.state.filters[e],onChange:s,children:c}),Object(m.jsx)(K.a.Append,{children:Object(m.jsx)(v.a,{variant:"outline-secondary p-0",onClick:l,children:Object(m.jsx)("i",{className:"bi bi-x text-danger remove-field-x"})})})]})]},e)}},n.addAdditionalField=function(e){var t=n.state.filters;t[e.target.value]="",n.setState({filters:t}),e.target.value="__Null_NonSelection"},n.deleteAdditionalField=function(e){var t=n.state.filters;delete t[e],n.setState({filters:t})},n.create_filter_modal=function(){var e,t=[Object(m.jsx)("option",{disabled:!0,hidden:!0,value:"__Null_NonSelection",children:"Add Filter..."},"__Null_NonSelection")],a=[],r=Object(x.a)(n.props.filtersObject.fields);try{for(r.s();!(e=r.n()).done;){var i=e.value;"ordering"!==i.name&&t.push(Object(m.jsx)("option",{children:i.name},i.name))}}catch(c){r.e(c)}finally{r.f()}var s=function(e){if("ordering"===e)return"continue";a.push(n.createSubField(e,N(n.props.filtersObject.fields.find((function(t){return t.name===e})).typename),n.state.filtersValidity[e],!n.state.filtersValidity[e],e,(function(t){return n.handleSubfieldChange(e,t)}),(function(){return n.deleteAdditionalField(e)})))};for(var l in n.state.filters)s(l);return Object(m.jsxs)(G.a,{show:n.state.openFilterModal,onHide:n.filterModalClose,children:[Object(m.jsx)(G.a.Header,{closeButton:!0,children:Object(m.jsx)(G.a.Title,{children:"Modal heading"})}),Object(m.jsx)(G.a.Body,{className:"d-flex justify-content-between",children:Object(m.jsxs)("div",{className:"w-100 mr-4",children:["Add filter:",Object(m.jsx)(K.a,{children:Object(m.jsx)(H.a.Control,{as:"select",defaultValue:"__Null_NonSelection",onChange:function(e){n.addAdditionalField(e)},children:t})}),a]})}),Object(m.jsx)(G.a.Footer,{className:"d-flex justify-content-between",children:Object(m.jsxs)("div",{children:[Object(m.jsx)(v.a,{variant:"primary",className:"mr-2",onClick:function(){n.filterModalClose(),n.sendFilters()},children:"Save Changes"}),Object(m.jsx)(v.a,{variant:"secondary",onClick:n.filterModalClose,children:"Close"})]})})]})},n.state={openOrderModal:!1,openFilterModal:!1,filters:{ordering:[]},filtersValidity:{}},n}return Object(c.a)(a,[{key:"render",value:function(){return Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)("div",{children:[Object(m.jsx)(v.a,{variant:"outline-primary",className:"ml-1",onClick:this.orderModalShow,children:"Order"}),Object(m.jsx)(v.a,{variant:"outline-primary",className:"ml-1",onClick:this.filterModalShow,children:"Filter"}),this.create_order_modal(),this.create_filter_modal()]})})}}]),a}(r.a.Component),te=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){return Object(m.jsxs)("div",{className:"d-flex justify-content-between",children:[Object(m.jsx)(ee,{type:this.props.type,changeFilterFn:this.props.changeFilterFn,filtersObject:this.props.typeFilters}),Object(m.jsxs)("div",{children:[Object(m.jsx)(v.a,{variant:"outline-primary",className:"ml-1",onClick:this.props.expandAllFn,children:"Expand All"}),Object(m.jsx)(v.a,{variant:"outline-primary",className:"ml-1",onClick:this.props.collapseAllFn,children:"Collapse All"})]}),Object(m.jsx)($,{pages_num:this.props.pages_num,current_page:this.props.current_page,changePageFn:this.props.changePageFn})]})}}]),a}(r.a.Component),ae=a(98),ne=a.n(ae),re=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e,n){var r;return Object(l.a)(this,a),(r=t.call(this,e,n)).refreshCodeMirror=function(e){"result"===e&&r.setState({responseAlert:!1}),setTimeout((function(){r.QueryEditorInstance.refresh(),r.ReturnValueEditorInstance.refresh()}),5)},r.handleChangeFields=function(e,t,a){var n={parameters:r.state.parameters,data:r.state.data};n[t][e].value=a.target.value,n.query=w(r.props.modalDetails.Action,n.parameters,n.data,r.props.schema),r.setState(n),r.fieldTypeValidation(e,a.target.value,t)},r.handleChangeCustomProperty=function(e,t,a,n){var i={parameters:r.state.parameters,data:r.state.data};i[a][e].additional_fields[t].value=n.target.value,i.query=w(r.props.modalDetails.Action,i.parameters,i.data,r.props.schema),r.setState(i),r.additionalFieldTypeValidation(e,t,n.target.value,a)},r.handleIgnoreProperty=function(e,t,a){var n={parameters:r.state.parameters,data:r.state.data};n[t][e].not_include=!a.target.checked,n.query=w(r.props.modalDetails.Action,n.parameters,n.data,r.props.schema),a.target.checked?(r.setState(n),r.fieldTypeValidation(e,r.state[t][e].value,t)):(n[t][e].validity=null,r.setState(n))},r.deleteAdditionalField=function(e,t,a){var n={parameters:r.state.parameters,data:r.state.data};delete n[t][e].additional_fields[a],n[t][e].additional_fields&&0===Object.keys(n[t][e].additional_fields).length&&n[t][e].additional_fields.constructor===Object&&(n[t][e].not_include=!0),n.query=w(r.props.modalDetails.Action,n.parameters,n.data,r.props.schema),r.setState(n)},r.addAdditionalField=function(e,t,a,n){var i={parameters:r.state.parameters,data:r.state.data};n.target.value="__Datatype_Placeholder",i[t][e].additional_fields[n.target.value]={datatype:a,value:"",validity:null},i[t][e].not_include=!1,i.query=w(r.props.modalDetails.Action,i.parameters,i.data,r.props.schema),r.setState(i)},r.additionalFieldTypeValidation=function(e,t,a,n){var i={parameters:r.state.parameters,data:r.state.data};i[n][e].additional_fields[t].validity=k(a,i[n][e].additional_fields[t].datatype),r.setState(i)},r.fieldTypeValidation=function(e,t,a){var n={parameters:r.state.parameters,data:r.state.data};n[a][e].validity=k(t,n[a][e].datatype),r.setState(n)},r.handleChangeQueryCodeMirror=function(e,t,a){r.setState({query:a})},r.update_response=function(e){"data"in e||"errors"in e?r.setState({response:JSON.stringify(e,q,2),responseAlert:!0}):("string"===typeof e&&r.setState({response:e,responseAlert:!0}),r.ReturnValueEditorInstance.refresh())},r.Send_to_API=function(){M(r.state.query,r.update_response)},r.create_field=function(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=N(a,n),s=!i.required||null!==r.state[t][e].default;if("Select"===i.field){var l=[];Object.keys(r.state[t][e].additional_fields).forEach((function(a){l.push(r.createSubField(a,N(r.state[t][e].additional_fields[a].datatype),null!==r.state[t][e].additional_fields[a].validity&&r.state[t][e].additional_fields[a].validity,null!==r.state[t][e].additional_fields[a].validity&&!r.state[t][e].additional_fields[a].validity,a,(function(n){r.handleChangeCustomProperty(e,a,t,n)}),(function(){r.deleteAdditionalField(e,t,a)})))}));var c=[Object(m.jsx)("option",{disabled:!0,hidden:!0,value:"__Datatype_Placeholder",children:i.placeholder},"__Datatype_Placeholder")],o=""!==r.state[t][e].value?r.state[t][e].value:""===r.state[t][e].defaultValue?i.placeholder:r.state[t][e].defaultValue;return i.options.forEach((function(e){c.push(Object(m.jsx)("option",{children:e.name},e.name))})),Object(m.jsxs)("div",{children:[e,":",Object(m.jsx)("br",{}),Object(m.jsxs)(K.a,{children:[Object(m.jsx)(H.a.Control,{as:"select",defaultValue:o,onChange:function(a){i.spawn_fields?r.addAdditionalField(e,t,i.options.find((function(e){return e.name===a.target.value})).typename,a):r.handleChangeFields(e,t,a)},children:c}),s&&Object(m.jsx)(K.a.Append,{children:Object(m.jsx)(K.a.Checkbox,{"aria-label":"Don't include this field",onChange:function(a){r.handleIgnoreProperty(e,t,a)},checked:!r.state[t][e].not_include})})]}),l]},e)}return Object(m.jsxs)("div",{children:[e,":",Object(m.jsx)("br",{}),Object(m.jsxs)(K.a,{children:[Object(m.jsx)(H.a.Control,{isValid:null!==r.state[t][e].validity&&r.state[t][e].validity,isInvalid:null!==r.state[t][e].validity&&!r.state[t][e].validity,type:i.field,placeholder:e,defaultValue:r.state[t][e].defaultValue,onChange:function(a){r.handleChangeFields(e,t,a)}}),s&&Object(m.jsx)(K.a.Append,{children:Object(m.jsx)(K.a.Checkbox,{"aria-label":"Don't include this field",onChange:function(a){r.handleIgnoreProperty(e,t,a)},checked:!r.state[t][e].not_include})})]})]},e)},r.componentDidMount=function(){r.setState({query:w(r.props.modalDetails.Action,r.state.parameters,r.state.data,r.props.schema)}),r.QueryEditorInstance.refresh(),r.ReturnValueEditorInstance.refresh()},r.state={query:"",response:"",responseAlert:!1},r.QueryEditorInstance=null,r.ReturnValueEditorInstance=null,r}return Object(c.a)(a,[{key:"render",value:function(){var e=this,t=[],a=[];Object.keys(this.state.parameters).forEach((function(a){t.push(e.create_field(a,"parameters",e.state.parameters[a].datatype,e.props.schema.__types))})),Object.keys(this.state.data).forEach((function(t){a.push(e.create_field(t,"data",e.state.data[t].datatype,e.props.schema.__types))})),t.length&&t.unshift(Object(m.jsxs)("div",{className:"border-bottom border-dark w-100 d-flex justify-content-between",children:[Object(m.jsx)("strong",{children:"Parameters:"}),Object(m.jsx)("strong",{children:"Include:"})]},"param_title")),a.length&&a.unshift(Object(m.jsxs)("div",{className:"border-bottom border-dark w-100 d-flex justify-content-between",children:[Object(m.jsx)("strong",{children:"Data:"}),Object(m.jsx)("strong",{children:"Include:"})]},"data_title"));var n=this.state.query,r=this.state.response;return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(G.a.Header,{closeButton:!0,children:Object(m.jsx)(G.a.Title,{children:"Modal title"})}),Object(m.jsx)(G.a.Body,{children:Object(m.jsxs)(J.a,{className:"nav-fill mx-3 mt-1",defaultActiveKey:"form",onSelect:this.refreshCodeMirror,children:[Object(m.jsxs)(Q.a,{eventKey:"form",title:"Form",children:[t,a]}),Object(m.jsx)(Q.a,{eventKey:"query",title:"Query",children:Object(m.jsx)(U.Controlled,{value:n,className:"no-resize mb-4 mh-100",options:{theme:"idea",autoRefresh:!0,lineWrapping:!0,keyMap:"sublime",mode:"graphql",smartIndent:!0,lineNumbers:!0},onBeforeChange:this.handleChangeQueryCodeMirror,onChange:function(){},editorDidMount:function(t){e.QueryEditorInstance=t}})}),Object(m.jsxs)(Q.a,{eventKey:"result",tabClassName:this.state.responseAlert?"bg-warning text-dark":"",title:"Result",children:[Object(m.jsx)(U.UnControlled,{value:r,className:"no-resize mb-4 mh-100",options:{theme:"idea",autoRefresh:!0,readOnly:!0,lineWrapping:!0,keyMap:"sublime",mode:{name:"javascript",json:!0},smartIndent:!0,lineNumbers:!0},editorDidMount:function(t){e.ReturnValueEditorInstance=t}}),"                        "]})]})}),Object(m.jsx)(G.a.Footer,{children:Object(m.jsx)(v.a,{variant:"primary",onClick:this.Send_to_API,children:"Execute Action"})})]})}}],[{key:"getDerivedStateFromProps",value:function(e){var t=e.modalDetails.Action;if(null!==t){var a={},n={};return"parameters"in t&&t.parameters.forEach((function(t){a[t.name]={defaultValue:t.name in e.modalDetails.Object?e.modalDetails.Object[t.name]:"default"in t?t.default:"",value:t.name in e.modalDetails.Object?e.modalDetails.Object[t.name]:"",datatype:t.typename,validity:null,not_include:"!"!==t.typename[t.typename.length-1]||null!==t.default,additional_fields:{}}})),"data"in t&&t.data.forEach((function(t){n[t.name]={defaultValue:t.name in e.modalDetails.Object?e.modalDetails.Object[t.name]:"default"in t?t.default:"",value:t.name in e.modalDetails.Object?e.modalDetails.Object[t.name]:"",datatype:t.typename,validity:null,not_include:"!"!==t.typename[t.typename.length-1]||null!==t.default,additional_fields:{}}})),{parameters:a,data:n}}return null}}]),a}(r.a.Component),ie=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).change_filters=function(e){n.setState({filters:e}),setTimeout((function(){n.reloadSchema()}),15)},n.load_objects=function(e){var t=e.data[Object.keys(e.data)[0]],a=Math.ceil(t.count/n.state.per_page);n.setState({loaded_objects:t.data,pages_num:a})},n.change_page=function(e){n.setState({current_page:Number(e)}),n.reloadSchema(Number(e))},n.reloadSchema=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.state.current_page;try{null!==n.props.object.name&&M(T(n.props.object,n.props.schema.__types,(e-1)*n.state.per_page,n.state.per_page,n.state.filters),n.load_objects,console.log)}catch(t){}},n.makeObjectActionButton=function(e,t){return e.permitted?Object(m.jsx)(v.a,{onClick:function(){return n.showInstanceAction(e,t)},children:e.name},e.name):Object(m.jsx)(ne.a,{disabled:!0,title:e.name,tooltipText:e.deny_reason,tooltipPlacement:"left",tooltipId:"tt2"},e.name)},n.showInstanceAction=function(e,t){n.setState({instanceActionModal:{Action:e,Object:t,show:!0}})},n.hideInstanceAction=function(){n.setState({instanceActionModal:{Action:null,Object:null,show:!1}})},n.openAllCards=function(){n.setState({expandedTabs:Object(z.a)(Array(n.state.per_page).keys())})},n.closeAllCards=function(){n.setState({expandedTabs:[]})},n.openOrCloseCard=function(e){var t=n.state.expandedTabs;t.includes(e)?t.splice(t.indexOf(e),1):t.push(e),n.setState({expandedTabs:t})},n.objectAccordion=function(e,t){var a=[],r=[],i=n.state.expandedTabs.includes(t);for(var s in e)"__str__"!==s&&("__actions"!==s?a.push(Object(m.jsxs)("div",{children:[Object(m.jsxs)("strong",{children:[s,":"]})," ",F(s,e)]},s)):e[s].forEach((function(t){return r.push(n.makeObjectActionButton(t,e))})));return Object(m.jsx)(p.a,{activeKey:i?"0":"X",className:"mr-2",children:Object(m.jsxs)(h.a,{children:[Object(m.jsx)(p.a.Toggle,{as:h.a.Header,eventKey:"0",className:"bg-secondary",onClick:function(){return n.openOrCloseCard(t)},children:e.__str__}),Object(m.jsx)(p.a.Collapse,{eventKey:"0",children:Object(m.jsx)(h.a.Body,{children:Object(m.jsxs)(j.a,{children:[Object(m.jsx)(f.a,{sm:9,children:a}),Object(m.jsxs)(f.a,{sm:3,children:["Actions:",Object(m.jsx)("br",{}),Object(m.jsx)(W.a,{vertical:!0,children:r})]})]})})})]})},e.name+t.toString())},n.generateObjectList=function(){var e=[];return n.state.loaded_objects.forEach((function(t,a){e.push(n.objectAccordion(t,a))})),e},n.state={pages:null,per_page:10,loaded_objects:[],current_page:1,pages_num:1,filters:{},expandedTabs:[],instanceActionModal:{Action:null,Object:null,show:!1}},n.reloadSchema(),n}return Object(c.a)(a,[{key:"render",value:function(){var e=this,t=this.generateObjectList();return Object(m.jsx)("div",{className:"ml-1 pr-1 mh-100 h-100 flex-column",children:null!==this.props.object.name&&Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(te,{type:this.props.schema.__types.find((function(t){return t.typename===e.props.object.name})),typeFilters:this.props.schema.__types.find((function(t){return t.typename===e.props.object.name+"Filters"})),pages_num:this.state.pages_num,current_page:this.state.current_page,changePageFn:this.change_page,changeFilterFn:this.change_filters,expandAllFn:this.openAllCards,collapseAllFn:this.closeAllCards}),t,Object(m.jsx)(G.a,{show:this.state.instanceActionModal.show,className:"InstanceActionModal",onHide:this.hideInstanceAction,children:Object(m.jsx)(re,{modalDetails:this.state.instanceActionModal,objectType:this.props.object,schema:this.props.schema})})]})})}}]),a}(r.a.Component),se=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e,n){var r;return Object(l.a)(this,a),(r=t.call(this,e,n)).handleShow=function(e){r.setState({active:e})},r.state={active:{name:null}},r}return Object(c.a)(a,[{key:"render_button",value:function(e){var t=this;return e.permitted?Object(m.jsx)(v.a,{variant:"primary",onClick:function(){t.handleShow(e)},className:"mb-1 ml-3 mr-3 mt-2",children:e.name},e.name):Object(m.jsx)(ne.a,{className:"mb-1 ml-3 mr-3 mt-2",disabled:!0,title:e.name,tooltipText:e.deny_reason,tooltipPlacement:"bottom",tooltipId:"tt1"},e.name)}},{key:"render",value:function(){var e=this;if(null===this.props.schema||void 0===this.props.schema)return Object(m.jsx)(m.Fragment,{children:Object(m.jsx)("strong",{children:"Could not obtain schema, check your connection to the API, then refresh"})});var t=[];if(null!==this.props.object.name&&t.push(Object(m.jsx)(v.a,{variant:"outline-primary",onClick:function(){e.handleShow({name:null})},className:"mb-1 ml-3 mr-3 mt-2",children:"Full Object List"},"__FullViewList")),this.props.object)if(this.props.object.name){var a=this.props.schema.__objects.find((function(t){return t.name===e.props.object.name}));"undefined"!==typeof a&&a.actions.forEach((function(a){t.push(e.render_button(a))}))}else if(null===this.props.object.name){var n=this.props.schema.__actions;"undefined"!==typeof n&&n.forEach((function(a){t.push(e.render_button(a))}))}return Object(m.jsxs)("div",{className:"d-flex flex-column h-100 w-100",children:[Object(m.jsx)(j.a,{className:"mr-1 ml-1",children:Object(m.jsx)(f.a,{className:"p-0",children:t})}),Object(m.jsx)(j.a,{className:"flex-grow-1 mh-100 h-100 mr-1 ml-1",children:Object(m.jsx)(f.a,{className:"px-2 py-1",children:null===this.state.active.name?Object(m.jsx)(ie,{object:this.props.object,schema:this.props.schema},"ListOfObjects_"+this.props.object.name):Object(m.jsx)(X,{action:this.state.active,schema:this.props.schema,object:this.props.object},"ActionView"+this.state.active.name)})})]})}}]),a}(r.a.Component),le=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={activeObject:null},n}return Object(c.a)(a,[{key:"changeActive",value:function(e){this.props.activeChange(e),this.setState({activeObject:e})}},{key:"render_item",value:function(e){var t=this;return Object(m.jsx)(O.a.Item,{active:this.state.activeObject===e.name,action:!0,onClick:function(){t.changeActive(e)},children:e.name},e.name)}},{key:"render",value:function(){var e=this,t=[];return null!==this.props.schema&&void 0!==this.props.schema&&(this.props.schema.__actions.length>0&&t.push(Object(m.jsx)(O.a.Item,{action:!0,active:null===this.state.activeObject,onClick:function(){e.changeActive({name:null})},className:"bg-object text-dark",children:"Unassigned"},"__unassigned_actions")),this.props.schema.__objects.forEach((function(a){t.push(e.render_item(a))}))),Object(m.jsxs)("div",{children:[Object(m.jsx)("h6",{className:"mx-3 m-2",children:"Objects:"}),Object(m.jsx)(O.a,{children:t})]})}}]),a}(r.a.Component),ce=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).changeObject=function(e){n.setState({activeObject:e})},n.state={activeObject:{name:null}},n}return Object(c.a)(a,[{key:"render",value:function(){return Object(m.jsxs)(j.a,{className:"flex-grow-1 overflow-scroll ",children:[Object(m.jsx)(f.a,{sm:2,className:"bg-secondary pl-4 mh-100",children:Object(m.jsx)(le,{activeChange:this.changeObject,schema:this.props.schema})}),Object(m.jsx)(f.a,{sm:10,className:"overflow-auto py-2 px-0 mh-100 d-flex",children:Object(m.jsx)(se,{object:this.state.activeObject,schema:this.props.schema},this.state.activeObject.name)})]})}}]),a}(r.a.Component),oe=a(18),de=a(120),ue=a(81),pe=a(117),he=a(118),je=a(115),fe=(a(142),function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={navbarKey:"objects",login_text:""},n.loginTextHandler=n.loginTextHandler.bind(Object(o.a)(n)),n.loginButton=n.loginButton.bind(Object(o.a)(n)),n.maybeSubmit=n.maybeSubmit.bind(Object(o.a)(n)),n}return Object(c.a)(a,[{key:"loginTextHandler",value:function(e){this.setState({login_text:e.target.value})}},{key:"loginButton",value:function(){this.props.login_fn(this.state.login_text)}},{key:"changeView",value:function(e){this.setState({navbarKey:e}),this.props.viewChange(e)}},{key:"maybeSubmit",value:function(e){"Enter"===e.key&&this.loginButton()}},{key:"make_quickLogin",value:function(e){var t=this,a=e,n="login_";return null===e?(a=Object(m.jsx)("em",{children:"Not logged in"}),n+="_anonymous"):n+=e,e===this.props.current_user&&(a=Object(m.jsx)("strong",{children:a})),Object(m.jsx)(oe.a.Item,{onClick:function(){t.props.current_user!==e&&t.props.login_fn(e)},children:a},n)}},{key:"render",value:function(){var e=this,t=[];this.props.logins.forEach((function(a){t.push(e.make_quickLogin(a))}));var a=null===this.props.current_user;return Object(m.jsxs)(de.a,{variant:"dark",expand:"lg",className:"navbar-expand-lg text-white navbar-expand bg-primary",children:[Object(m.jsxs)("div",{className:"navbar-collapse collapse w-100 order-1 order-md-0 dual-collapse2",children:[Object(m.jsx)(de.a.Brand,{href:"https://www.github.com/karlosss/simple_api",children:"Simple-API"}),Object(m.jsx)("div",{className:"collapse navbar-collapse",children:Object(m.jsx)(ue.a,{variant:"pills",activeKey:this.state.navbarKey,children:Object(m.jsx)(ue.a.Link,{onClick:function(){e.changeView("objects")},eventKey:"objects",children:"Objects"})})})]}),Object(m.jsx)("div",{className:"collapse navbar-collapse pe-4",children:Object(m.jsxs)("ul",{className:"navbar-nav me-auto ms-auto",children:[Object(m.jsx)(pe.a,{placement:"left",delay:{show:250,hide:400},overlay:Object(m.jsxs)(he.a,{id:"tooltip",children:[Object(m.jsx)("strong",{children:this.props.connected?"Succesfully fetched schema from API":"Failed to fetch schema from API"}),"."]}),children:this.props.connected?Object(m.jsx)("i",{className:"bi bi-check connected-icon text-success"}):Object(m.jsx)("i",{className:"bi bi-x connected-icon text-danger"})}),Object(m.jsxs)(oe.a,{children:[Object(m.jsx)(oe.a.Toggle,{id:"login-dropdown",className:"nav-link text-white",children:a?"Not logged in":this.props.current_user}),Object(m.jsxs)(oe.a.Menu,{className:"dropdown-menu large-dropdown","aria-labelledby":"navbarDropdown",alignRight:!0,children:[a?Object(m.jsx)(m.Fragment,{}):Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(oe.a.Item,{onClick:function(){return e.props.logout_fn(e.props.current_user)},children:"Logout Current User"}),Object(m.jsx)(oe.a.Divider,{})]}),Object(m.jsx)("label",{className:"px-4",children:"Login:"}),Object(m.jsxs)(K.a,{className:"mb-3 px-4",children:[Object(m.jsx)(Z.a,{placeholder:"Username","aria-label":"Username to login as","aria-describedby":"basic-addon2",value:this.state.login_text,onChange:this.loginTextHandler,onKeyDown:this.maybeSubmit}),Object(m.jsx)(K.a.Append,{children:Object(m.jsx)(v.a,{onClick:this.loginButton,variant:"outline-primary",type:"submit",children:"Login"})})]}),Object(m.jsx)(oe.a.Divider,{}),t,Object(m.jsx)(oe.a.Divider,{}),Object(m.jsx)(oe.a.Item,{onClick:this.props.logout_fn_all,children:"Logout All"})]})]})]})})]})}}]),a}(r.a.Component)),me=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;Object(l.a)(this,a),(n=t.call(this,e)).changeView=function(e){n.reloadSchema(),n.setState({activeView:n.state.windows[e]})},n.changeUser=function(e){if(!n.state.logins.includes(e)){var t=n.state.logins.concat(e);n.setState({logins:t}),L("savedLogins",JSON.stringify(t))}n.setState({current_user:e}),n.reloadSchema()},n.logoutUser=function(e){if(null!==e){e===n.state.current_user&&n.setState({current_user:null});var t=n.state.logins.filter((function(t){return t!==e}));n.setState({logins:t}),L("savedLogins",JSON.stringify(t))}},n.logoutAll=function(){n.setState({logins:[null],current_user:null}),L("savedLogins",JSON.stringify([null]))};var r,i,s={objects:ce,actions:g},c=[null];return B("savedLogins")?c=JSON.parse(B("savedLogins")):L("savedLogins",JSON.stringify(c)),n.state={activeView:ce,windows:s,logins:c,current_user:null,schema:null,errors:null},r=n.changeUser,i=function(){},fetch("./login",{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":R()},credentials:"include",body:JSON.stringify({operation:"status"})}).then((function(e){return e.json()})).then((function(e){return D(e.username,e,r,i)})),n.reloadSchema(),n}return Object(c.a)(a,[{key:"reloadSchema",value:function(){var e,t,a=this;e=function(e){a.setState({schema:e})},M("\n    {\n      __types{\n        typename\n        fields{\n          name\n          typename\n        }\n      }\n      __objects{\n        name\n        pk_field\n        actions{\n          name\n          parameters{\n            name\n            typename\n            default\n          }\n          data {\n            name\n            typename\n            default\n          }\n          mutation\n          return_type\n          permitted\n          deny_reason\n          retry_in\n        }\n      }\n    __actions{\n      name\n      parameters{\n        name\n        typename\n        default\n      }\n      data {\n        name\n        typename\n        default\n      }\n      mutation\n      return_type\n      permitted\n      deny_reason\n      retry_in\n    }\n}",(function(a){void 0!==a?e(a.data):t(a)}),t=function(e){console.log(e),a.setState({schema:null})})}},{key:"render",value:function(){var e=this,t=this.state.activeView;return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(fe,{viewChange:this.changeView,logins:this.state.logins,login_fn:function(t){!function(e,t,a){null!==e?fetch("./login",{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":R()},credentials:"include",body:JSON.stringify({username:e,operation:"login"})}).then((function(e){return e.json()})).then((function(n){return D(e,n,t,a)})).catch((function(e){return a(e.text)})):E(e,t,a)}(t,e.changeUser,(function(){}))},logout_fn:function(t){E(t,e.logoutUser,(function(){}))},logout_fn_all:function(){E(e.state.current_user,e.logoutAll,(function(){}))},current_user:this.state.current_user,connected:null!==this.state.schema}),Object(m.jsx)(t,{schema:this.state.schema},this.state.current_user)]})}}]),a}(r.a.Component),be=function(){return Object(m.jsx)(je.a,{fluid:!0,className:"container-fluid d-flex flex-column vh-100 p-0 top-container",children:Object(m.jsx)(me,{})})};a(143);s.a.render(Object(m.jsx)(be,{}),document.getElementById("root"))}},[[144,1,2]]]);
//# sourceMappingURL=main.ac3a80e1.chunk.js.map